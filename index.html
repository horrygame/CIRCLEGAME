<!DOCTYPE html>
<html>
<head>
    <title>Шарики Игра</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            background: #323250; 
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas { 
            display: block; 
            margin: 0 auto; 
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            image-rendering: pixelated;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        // JavaScript код игры
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Установка размеров canvas
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Основные переменные
        const colors = {
            background: '#323250',
            playButton: '#c34a3c',
            circlePass: '#e98216',
            defaultButton: '#4682b4',
            text: '#ffffff'
        };
        
        // Загрузка изображений
        const images = {};
        const imagePaths = {
            character: 'classic_guy.png',
            battlePass: 'icon_battle_pass.png',
            play: 'icon_play.png',
            statistics: 'icon_statistics.png',
            shop: 'icon_shop.png',
            quests: 'icon_quests.png',
            friends: 'icon_friends.png'
        };
        
        // Функция загрузки изображений
        function loadImages() {
            return new Promise((resolve) => {
                let loaded = 0;
                const total = Object.keys(imagePaths).length;
                
                for (const [key, path] of Object.entries(imagePaths)) {
                    const img = new Image();
                    img.onload = () => {
                        loaded++;
                        if (loaded === total) resolve();
                    };
                    img.onerror = () => {
                        // Если изображение не загрузилось, создаем заглушку
                        console.warn(`Не удалось загрузить изображение: ${path}`);
                        loaded++;
                        if (loaded === total) resolve();
                    };
                    img.src = path;
                    images[key] = img;
                }
            });
        }
        
        // Класс кнопки
        class Button {
            constructor(x, y, width, height, text, icon, isCorner = false, color = colors.defaultButton) {
                this.x = x;
                this.y = y;
                this.width = width;
                this.height = height;
                this.text = text;
                this.icon = icon;
                this.isCorner = isCorner;
                this.color = color;
                this.isHovered = false;
            }
            
            draw() {
                // Рисуем кнопку
                ctx.fillStyle = this.isHovered ? this.lightenColor(this.color, 20) : this.color;
                if (this.isCorner) {
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                    ctx.strokeStyle = colors.text;
                    ctx.lineWidth = 2;
                    ctx.strokeRect(this.x, this.y, this.width, this.height);
                } else {
                    this.roundRect(this.x, this.y, this.width, this.height, 15);
                }
                
                // Рисуем иконку и текст
                if (this.icon && images[this.icon]) {
                    const iconSize = 80; // Увеличили размер иконки в 2 раза (было 40)
                    
                    if (this.isCorner) {
                        // Для угловых кнопок центрируем содержимое
                        const iconX = this.x + this.width/2 - iconSize/2;
                        const iconY = this.y + this.height/2 - iconSize/2 - 10;
                        
                        ctx.drawImage(images[this.icon], iconX, iconY, iconSize, iconSize);
                        
                        // Текст
                        ctx.fillStyle = colors.text;
                        ctx.font = 'bold 18px Arial';
                        ctx.textAlign = 'center';
                        const textY = this.y + this.height/2 + 30;
                        ctx.fillText(this.text, this.x + this.width/2, textY);
                    } else {
                        // Для обычных кнопок - иконка слева, текст справа
                        const iconX = this.x + 15;
                        const iconY = this.y + this.height/2 - iconSize/2;
                        
                        ctx.drawImage(images[this.icon], iconX, iconY, iconSize, iconSize);
                        
                        // Текст выравниваем по правому краю
                        ctx.fillStyle = colors.text;
                        ctx.font = 'bold 24px Arial';
                        ctx.textAlign = 'right';
                        const textX = this.x + this.width - 15;
                        const textY = this.y + this.height/2 + 10;
                        ctx.fillText(this.text, textX, textY);
                    }
                } else {
                    // Если нет иконки, просто центрируем текст
                    ctx.fillStyle = colors.text;
                    ctx.font = 'bold 24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(this.text, this.x + this.width/2, this.y + this.height/2 + 10);
                }
            }
            
            roundRect(x, y, width, height, radius) {
                ctx.beginPath();
                ctx.moveTo(x + radius, y);
                ctx.lineTo(x + width - radius, y);
                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
                ctx.lineTo(x + width, y + height - radius);
                ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                ctx.lineTo(x + radius, y + height);
                ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
                ctx.lineTo(x, y + radius);
                ctx.quadraticCurveTo(x, y, x + radius, y);
                ctx.closePath();
                ctx.fill();
                
                ctx.strokeStyle = colors.text;
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            lightenColor(color, percent) {
                // Функция для осветления цвета
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 +
                             (G<255?G<1?0:G:255)*0x100 +
                             (B<255?B<1?0:B:255)).toString(16).slice(1);
            }
            
            isPointInside(x, y) {
                return x >= this.x && x <= this.x + this.width && 
                       y >= this.y && y <= this.y + this.height;
            }
        }
        
        // Создание кнопок
        let buttons = [];
        
        function createButtons() {
            const cornerWidth = canvas.width / 4;
            const cornerHeight = canvas.height / 8; // Уменьшили высоту угловых кнопок в 2 раза
            const regularWidth = 200; // Немного увеличили обычные кнопки
            const regularHeight = 70;
            const margin = 20;
            
            buttons = [
                new Button(0, 0, cornerWidth, cornerHeight, "Статистика", "statistics", true),
                new Button(canvas.width - cornerWidth, 0, cornerWidth, cornerHeight, "Магазин", "shop", true),
                new Button(margin, canvas.height/2 - regularHeight/2, regularWidth, regularHeight, "Квесты", "quests"),
                new Button(canvas.width - regularWidth - margin, canvas.height/2 - regularHeight/2, regularWidth, regularHeight, "Друзья", "friends"),
                new Button(0, canvas.height - cornerHeight, cornerWidth, cornerHeight, "Circle Pass", "battlePass", true, colors.circlePass),
                new Button(canvas.width - cornerWidth, canvas.height - cornerHeight, cornerWidth, cornerHeight, "Играть", "play", true, colors.playButton)
            ];
        }
        
        // Основной игровой цикл
        function gameLoop() {
            // Очистка canvas
            ctx.fillStyle = colors.background;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Рисуем персонажа в центре с четким отображением
            if (images.character) {
                const charSize = Math.min(canvas.width, canvas.height) / 3; // Немного увеличили персонажа
                const charX = canvas.width/2 - charSize/2;
                const charY = canvas.height/2 - charSize/2;
                
                // Отключаем сглаживание для четкого отображения
                ctx.imageSmoothingEnabled = false;
                ctx.drawImage(images.character, charX, charY, charSize, charSize);
                ctx.imageSmoothingEnabled = true; // Включаем обратно для остальных элементов
            } else {
                // Заглушка если изображение не загрузилось
                ctx.fillStyle = '#FFD700';
                ctx.beginPath();
                ctx.arc(canvas.width/2, canvas.height/2, Math.min(canvas.width, canvas.height) / 6, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Рисуем кнопки
            buttons.forEach(button => button.draw());
            
            requestAnimationFrame(gameLoop);
        }
        
        // Обработка событий
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            buttons.forEach(button => {
                button.isHovered = button.isPointInside(x, y);
            });
            
            // Изменяем курсор при наведении на кнопку
            canvas.style.cursor = buttons.some(button => button.isHovered) ? 'pointer' : 'default';
        });
        
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            buttons.forEach(button => {
                if (button.isPointInside(x, y)) {
                    console.log(`Нажата кнопка: ${button.text}`);
                    // Здесь можно добавить логику для каждой кнопки
                    alert(`Нажата кнопка: ${button.text}`);
                }
            });
        });
        
        // Запуск игры после загрузки изображений
        loadImages().then(() => {
            createButtons();
            gameLoop();
        }).catch(error => {
            console.error('Ошибка загрузки изображений:', error);
            createButtons();
            gameLoop();
        });
        
        // Обработка изменения размера окна
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            createButtons();
        });
    </script>
</body>
</html>
